<head>
  <title>MBTA Ninja</title>
  <meta name="apple-mobile-web-app-status-bar-style"
        content="default" />
  <meta name="viewport"
      content="user-scalable=no, width=device-width" />
</head>

<body>
  <div class="red-line"></div>

  <div class="main-content">
    {{#each stations}}
      {{> station}}
    {{/each}}
  </div>

  <div class="add-button-container">
    <a class="btn-floating btn-large waves-effect waves-light red modal-trigger" href="#add-modal"><i class="mdi-content-add"></i></a>
  </div>

  {{> createEvent}}

  {{> introModal}}

</body>

<template name="createEvent">
  <div id="add-modal" class="modal">
    <div class="modal-content">
      <form>
        <label for="nameInput"> Event Type: </label>
        <select id="nameInput">
          {{#each eventTypes}}
            <option value="{{name}}">{{name}}</option>
          {{/each}}
        </select>
        <label for="locationInput"> Location: </label>
        <select id="locationInput">
          {{#each stations}}
            <option value="{{name}}">{{name}}</option>
          {{/each}}
        </select>
      </form>
    </div>
    <div class="modal-footer">
      <a href="#" class="waves-effect waves-green btn btn-flat blue white-text modal-action modal-close submit">Submit</a>
    </div>
  </div>
</template>

<template name="event">
  <div class="event card grey lighten-5">
    <div class="card-content">
      <div class="main-info">
        {{#if positive name}}
          <span class="event-title green-text">
            {{name}}
          </span>
        {{else}}
          <span class="event-title">
            {{name}}
          </span>
        {{/if}}
        <span class="event-location">
          at {{location}}
        </span>
      </div>
      <div class="event-details">
        <span class="event-detail event-time">
          <i class="mdi-device-access-time"></i>
          {{livestamp createdAt}}
        </span>

        <span class="event-detail event-votes">
          <i class="mdi-action-thumb-up"></i>
          {{votes}} confirmations
        </span>
      </div>
    </div>

    {{#if canUpvote}}
    <div class="card-action">
      <a class="waves-effect waves-light btn-flat blue white-text upvote"><i class="mdi-action-thumb-up left"></i>Confirm</a>
    </div>
    {{/if}}
  </div>
</template>

<template name="station">
  <div class="station">
    <div class="station-name">
      <div class="white-circle"></div>
      {{name}}
    </div>
    <div class="events-container">
      {{#each events name}}
        {{> event}}
      {{/each}}
    </div>
  </div>
</template>

<template name="introModal">
  <div id="intro-screen">
    <div class="intro-screen-content">
      <div class="logo">
        <img class="ninja-logo" src="/images/ninja.png" />
      </div>
      <h1 class="app-title">
        MBTA Ninja
      </h1>
      <h2 class="app-subtitle">
        Waze for the T
      </h2>
      <ul>
        <li>No more guessing what "minor delays" means.</li>
        <li>Get realtime updates from fellow T riders.</li>
        <li>Confirm them when you see the same thing.</li>
      </ul>
      <div class="collection lines">
        <a href="#!" class="collection-item line-selector red-text" data-line="red-line-northbound">Red Line - Northbound (to Alewife)</a>
        <a href="#!" class="collection-item line-selector red-text" data-line="red-line-southbound">Red Line - Southbound (to Ashmont)</a>
      </div>
    </div>
  </div>
</template>
